{"id":"muBE","dependencies":[{"name":"/Users/pengxiuwen/dev/virtual-pet/tsconfig.json","includedInParent":true,"mtime":1652430899798},{"name":"/Users/pengxiuwen/dev/virtual-pet/package.json","includedInParent":true,"mtime":1652430899658},{"name":"classnames","loc":{"line":1,"column":23,"index":23},"parent":"/Users/pengxiuwen/dev/virtual-pet/src/scenes/setting.tsx","resolved":"/Users/pengxiuwen/dev/virtual-pet/node_modules/classnames/index.js"},{"name":"phaser","loc":{"line":2,"column":19,"index":56},"parent":"/Users/pengxiuwen/dev/virtual-pet/src/scenes/setting.tsx","resolved":"/Users/pengxiuwen/dev/virtual-pet/node_modules/phaser/dist/phaser.js"},{"name":"~/utils","loc":{"line":3,"column":61,"index":127},"parent":"/Users/pengxiuwen/dev/virtual-pet/src/scenes/setting.tsx","resolved":"/Users/pengxiuwen/dev/virtual-pet/src/utils/index.tsx"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=r(require(\"classnames\")),t=r(require(\"phaser\")),a=require(\"~/utils\");function r(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=m();return function(){var a,r=y(e);if(t){var c=y(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return f(this,a)}}function f(e,t){if(t&&(\"object\"===c(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return d(e)}function d(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function m(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=[\"girl\",\"boy\"],v=function(r){u(s,t.default.Scene);var c=h(s);function s(){var e;return i(this,s),(e=c.call(this,\"setting\")).characters=[a.CharacterKeys.Girl,a.CharacterKeys.Boy],e.basicData=[{type:\"health\",name:\"健康\",value:5,selected:!1},{type:\"feeling\",name:\"心情\",value:5,selected:!0},{type:\"knowledge\",name:\"知识\",value:5,selected:!1},{type:\"relationship\",name:\"人际\",value:5,selected:!1}],e.sumValue=0,e}return o(s,[{key:\"init\",value:function(){this.currentkey=this.characters[0],this.gameWidth=this.scale.width,this.gameHeight=this.scale.height}},{key:\"preload\",value:function(){var e=this;this.characters.forEach(function(t){e.load.spritesheet(t,\"images/characters/\".concat(t,\".png\"),{frameWidth:320,frameHeight:320})})}},{key:\"create\",value:function(){var e=this;this.characters.forEach(function(t){e.anims.create({key:\"\".concat(t,\"-alive\"),frames:e.anims.generateFrameNames(t,{start:0,end:2}),frameRate:3,repeat:-1})}),this.currentCharacter=this.add.sprite(.5*this.gameWidth,.5*this.gameHeight,this.characters[0]).play(\"\".concat(this.characters[0],\"-alive\")),this.updateSelectDom()}},{key:\"update\",value:function(){}},{key:\"updateSelectDom\",value:function(){var t=this;this.selectDom&&this.selectDom.destroy(),this.selectDom=this.add.dom(0,0,React.createElement(\"div\",{className:\"character\"},React.createElement(\"div\",{className:\"btn-box\"},React.createElement(\"div\",{className:(0,e.default)(\"previous\",{disabled:0===this.characters.indexOf(this.currentkey)}),onClick:function(){return t.changeCharacter(-1)}}),React.createElement(\"div\",{className:(0,e.default)(\"next\",{disabled:this.characters.indexOf(this.currentkey)===this.characters.length-1}),onClick:function(){return t.changeCharacter(1)}})),React.createElement(\"div\",{className:\"confirm-btn\",onClick:this.setOriginData.bind(this)},\"选择这个大冤种\"))).setOrigin(0)}},{key:\"changeCharacter\",value:function(e){this.currentCharacter.destroy(),this.currentCharacter=this.add.sprite(.5*this.gameWidth,.5*this.gameHeight,this.characters[this.characters.indexOf(this.currentkey)+e]).play(\"\".concat(this.characters[this.characters.indexOf(this.currentkey)+e],\"-alive\")),this.currentkey=this.characters[this.characters.indexOf(this.currentkey)+e],this.updateSelectDom()}},{key:\"onChangeData\",value:function(e,t){var a=this,r=!1;if(!(this.sumValue<1&&1===t||this.sumValue>9&&-1===t)){var c=this.basicData.map(function(c){return c.type===e&&(c.value+=t,a.sumValue-=t,r=!0),c});r&&(this.basicData=c,this.updateBasicDataDom())}}},{key:\"onDataTypeSelected\",value:function(e){var t=this.basicData.map(function(t){return t.type===e?t.selected=!0:t.selected=!1,t});this.basicData=t,this.updateBasicDataDom()}},{key:\"updateBasicDataDom\",value:function(){var t=this;this.basicDataDom&&this.basicDataDom.destroy(),this.basicDataDom=this.add.dom(0,0,React.createElement(\"div\",{className:\"set-basic-data\"},React.createElement(\"div\",{className:\"basic-data\"},this.basicData.map(function(a){return React.createElement(\"div\",{key:a.type,className:(0,e.default)(\"data-item\",[a.type],{selected:a.selected}),onClick:function(){return t.onDataTypeSelected(a.type)}},a.selected&&React.createElement(\"div\",{className:\"btn-box\"},React.createElement(\"div\",{className:(0,e.default)(\"minus\",{disabled:0===a.value}),onClick:function(){return t.onChangeData(a.type,-1)}}),React.createElement(\"div\",{className:(0,e.default)(\"plus\",{disabled:10===a.value}),onClick:function(){return t.onChangeData(a.type,1)}})),React.createElement(\"div\",{className:\"data-name\"},React.createElement(\"span\",null,a.name),React.createElement(\"span\",null,a.value)),React.createElement(\"div\",{className:\"percent\"},React.createElement(\"div\",{style:{width:\"\".concat(a.value/10*100,\"%\")}})))}),React.createElement(\"div\",{className:\"score-tips\"},\"还可分配 \".concat(this.sumValue,\" 分\")),React.createElement(\"div\",{className:\"start\",onClick:this.toHome.bind(this)},\"我准备好啦~\")))).setOrigin(0)}},{key:\"toHome\",value:function(){var e;this.basicData.forEach(function(t){e=Object.assign(Object.assign({},e),n({},t.type,t.value))}),console.log(e),(0,a.setBasicData)(e),this.scene.stop(\"setting\"),this.scene.start(\"home\")}},{key:\"setOriginData\",value:function(){(0,a.setCharacterKey)(this.currentkey),this.selectDom.destroy(),this.currentCharacter.destroy(),this.updateBasicDataDom()}}]),s}();exports.default=v;"},"sourceMaps":null,"error":null,"hash":"9543a5bf1c56018e18bc84889e33c9e9","cacheData":{"env":{}}}